{"ast":null,"code":"var _jsxFileName = \"/Users/poonam/Projects/Splitwise/Frontend/src/components/Groups/GroupView.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$();\n\nimport axios from 'axios';\nimport React, { useState } from 'react';\nimport { Button, Card, Col, Container, Form, InputGroup, ListGroup, Modal, Row } from 'react-bootstrap';\nimport CurrencyInput from 'react-currency-input';\nimport { GrEdit } from 'react-icons/gr';\nimport { connect } from 'react-redux';\nimport { alertActions } from '../../_actions';\nimport { SERVER_URL } from '../../_constants';\nimport { calculateDebtForAGroup } from '../../_helper/debtcalculator';\nimport { CURRENCYFORMAT, getRoundedAmount } from '../../_helper/money';\nimport { AlertMessages } from '../Alert/Alert';\nimport { GroupAvatar, LocalizedAmount, UserAvatar } from '../Shared/Shared';\nimport { PerFriendSettleUpModal } from '../Transactions/PerFriendSettleupModal';\nimport { TransactionView } from '../Transactions/TransactionView';\nimport { GroupCreateOrUpdateModal } from './GroupCreateOrUpdateModel';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass GroupView extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      groupId: this.props.groupId,\n      group: null,\n      transactions: [],\n      isAddExpenseOpen: false,\n      isGroupUpdateOpen: false\n    };\n  }\n\n  async componentDidMount() {\n    await this.fetchData();\n  }\n\n  async fetchData() {\n    try {\n      if (this.props.groupId) {\n        const [groupRes, txnRes] = await Promise.all([axios.get(SERVER_URL + '/group/get?groupId=' + this.props.groupId), axios.get(SERVER_URL + '/group/transactions?groupId=' + this.props.groupId)]);\n        this.setState({\n          group: groupRes.data,\n          transactions: txnRes.data\n        });\n      }\n    } catch (err) {\n      this.props.errorAlert([\"Something went wrong. Please try again\"]);\n    }\n  }\n\n  forceReload() {\n    this.fetchData();\n  }\n\n  render() {\n    let balances = null;\n    let canLeave = false;\n\n    if (this.state.group) {\n      balances = calculateDebtForAGroup(this.state.group, this.state.transactions);\n      const usersBalance = balances.filter(balance => balance.user.email === this.props.user.email)[0];\n      balances = balances.filter(balance => balance.user.email !== this.props.user.email);\n\n      if (usersBalance) {\n        canLeave = getRoundedAmount(usersBalance.totalAmount) === 0;\n      }\n    }\n\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(Container, {\n        fluid: true,\n        children: /*#__PURE__*/_jsxDEV(Row, {\n          fluid: true,\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            sm: 8,\n            lg: 8,\n            children: this.state.group && /*#__PURE__*/_jsxDEV(Card, {\n              children: [/*#__PURE__*/_jsxDEV(ConnectedGroupHeader, {\n                data: {\n                  group: this.state.group\n                },\n                canLeave: canLeave,\n                reloadHomeView: this.props.reloadHomeView,\n                reloadGroupView: this.forceReload.bind(this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 69,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(TransactionView, {\n                transactions: this.state.transactions,\n                reloadGroupView: this.forceReload.bind(this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 75,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            sm: 2,\n            lg: 2,\n            children: this.state.transactions.length > 0 && balances && balances.length > 0 && balances.map(balance => /*#__PURE__*/_jsxDEV(UserBalanceView, {\n              data: balance,\n              group: this.state.group,\n              reloadGroupView: this.forceReload.bind(this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 37\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }, this)\n    }, void 0, false);\n  }\n\n}\n\nconst UserBalanceView = props => {\n  _s();\n\n  const [isSettleUpModalOpen, openSettleUpModal] = useState(false);\n  const color = props.data.totalAmount === 0 ? 'orange' : props.data.totalAmount > 0 ? 'green' : 'red';\n  const suffix = props.data.totalAmount === 0 ? \"settled up\" : props.data.totalAmount > 0 ? ' gets back ' : ' owes ';\n  return /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginRight: '3rem'\n        },\n        children: [/*#__PURE__*/_jsxDEV(UserAvatar, {\n          user: props.data.user\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginLeft: '3rem',\n            marginTop: '-1rem'\n          },\n          className: \"h5\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              color\n            },\n            children: [suffix, props.data.totalAmount !== 0 && /*#__PURE__*/_jsxDEV(LocalizedAmount, {\n              amount: props.data.totalAmount,\n              currency: props.data.user.default_currency\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [props.data.totalAmount != 0 && /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          onClick: () => openSettleUpModal(true),\n          children: \"SETTLE UP\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(PerFriendSettleUpModal, {\n          total: props.data.totalAmount,\n          group: props.group,\n          friend: props.data.user,\n          isOpen: isSettleUpModalOpen,\n          closeModal: () => openSettleUpModal(false),\n          reloadGroupView: props.reloadGroupView\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }, this)\n  }, props.data.user.email, false, {\n    fileName: _jsxFileName,\n    lineNumber: 108,\n    columnNumber: 9\n  }, this);\n};\n\n_s(UserBalanceView, \"Mc2jKciROvLXic2jyTpr96cF9t8=\");\n\n_c = UserBalanceView;\n\nconst GroupHeader = props => {\n  _s2();\n\n  const [isAddExpenseOpen, setAddExpenseFormOpen] = useState(false);\n  const [isGroupUpdateOpen, setGroupUpdateOpen] = useState(false);\n  const [settleUpWarning, openSettleUpWarning] = useState(false);\n\n  function openAddExpenseForm() {\n    setAddExpenseFormOpen(true);\n  }\n\n  function closeAddExpenseForm() {\n    setAddExpenseFormOpen(false);\n  }\n\n  function openUpdateGroupForm() {\n    setGroupUpdateOpen(true);\n  }\n\n  function closeUpdateGroupForm() {\n    setGroupUpdateOpen(false);\n  }\n\n  function openSettleUpWarningModal() {\n    openSettleUpWarning(true);\n  }\n\n  function closeSettleUpWarningModal() {\n    openSettleUpWarning(false);\n  }\n\n  async function leaveGroup() {\n    const data = {\n      groupId: props.data.group.id,\n      userId: props.user.email\n    };\n\n    try {\n      const response = await axios.post(SERVER_URL + '/group/leave', data);\n      props.reloadHomeView();\n      props.reloadGroupView();\n    } catch (error) {\n      const data = error.response.data;\n      const msg = Array.isArray(data) ? data.map(d => d.message) : [\"Some error occured, please try again.\"];\n      props.errorAlert(msg);\n    }\n  }\n\n  async function joinGroup() {\n    const data = {\n      groupId: props.data.group.id,\n      userId: props.user.email\n    };\n\n    try {\n      const response = await axios.post(SERVER_URL + '/group/join', data);\n      props.reloadHomeView();\n      props.reloadGroupView();\n    } catch (error) {\n      const data = error.response.data;\n      const msg = Array.isArray(data) ? data.map(d => d.message) : [\"Some error occured, please try again.\"];\n      props.errorAlert(msg);\n    }\n  }\n\n  const isJoined = _.find(props.data.group.members, m => m.email == props.user.email).group_join_status !== \"INVITED\";\n  return /*#__PURE__*/_jsxDEV(Card.Header, {\n    children: /*#__PURE__*/_jsxDEV(Container, {\n      children: /*#__PURE__*/_jsxDEV(Row, {\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          sm: 6,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              alignItems: 'baseline'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              style: {\n                marginRight: '1rem'\n              },\n              children: [/*#__PURE__*/_jsxDEV(GroupAvatar, {\n                group: props.data.group\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 214,\n                columnNumber: 33\n              }, this), \" \\xA0\", ' ', props.data.group.name]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 29\n            }, this), isJoined && /*#__PURE__*/_jsxDEV(GrEdit, {\n              onClick: openUpdateGroupForm\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 42\n            }, this), isGroupUpdateOpen ? /*#__PURE__*/_jsxDEV(GroupCreateOrUpdateModal, {\n              group: props.data.group,\n              reloadHomeView: () => {\n                props.reloadHomeView();\n                props.reloadGroupView();\n              },\n              createMode: false,\n              closeModal: closeUpdateGroupForm,\n              isOpen: isGroupUpdateOpen\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 33\n            }, this) : null]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          sm: 3,\n          children: [' ', /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              alignItems: 'baseline'\n            },\n            children: [isJoined && props.data.group.members.filter(m => m.group_join_status !== \"INVITED\").length > 1 && /*#__PURE__*/_jsxDEV(Button, {\n              onClick: openAddExpenseForm,\n              children: \"ADD EXPENSE\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 236,\n              columnNumber: 33\n            }, this), !isJoined && /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"success\",\n              onClick: joinGroup,\n              children: \"ACCEPT INVITATION\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 239,\n              columnNumber: 33\n            }, this), isAddExpenseOpen ? /*#__PURE__*/_jsxDEV(ConnectedAddExpenseModal, {\n              reloadGroupView: props.reloadGroupView,\n              group: props.data.group,\n              closeModal: closeAddExpenseForm,\n              isOpen: isAddExpenseOpen\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 244,\n              columnNumber: 33\n            }, this) : null, /*#__PURE__*/_jsxDEV(Button, {\n              style: {\n                marginLeft: '2rem'\n              },\n              variant: \"danger\",\n              onClick: props.canLeave ? leaveGroup : openSettleUpWarningModal,\n              children: \"LEAVE GROUP\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(SettleUpWarningModal, {\n              isOpen: settleUpWarning,\n              closeModal: closeSettleUpWarningModal\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 208,\n    columnNumber: 9\n  }, this);\n};\n\n_s2(GroupHeader, \"zncp22WmzkUmtcxhEfoxs0r2DzI=\");\n\n_c2 = GroupHeader;\n\nfunction AddExpenseModal(props) {\n  _s3();\n\n  const payees = props.group.members.filter(member => member.email !== props.user.email).filter(u => (u === null || u === void 0 ? void 0 : u.group_join_status) !== \"INVITED\");\n  const [selectedMembers, setSelectedMembers] = useState(new Map(payees.map(member => [member.email, true])));\n  const [amount, setAmount] = useState(0);\n  const [description, setDescription] = useState(\"\");\n  const [errorMsg, setErrorMsg] = useState([]);\n\n  function toggleMember(memberEmail) {\n    selectedMembers.set(memberEmail, !selectedMembers.get(memberEmail));\n    setSelectedMembers(selectedMembers);\n  }\n\n  function handleAmountChange(event, maskedvalue, floatvalue) {\n    setAmount(maskedvalue);\n  }\n\n  function handleDescChange(e) {\n    e.preventDefault();\n    setDescription(e.target.value);\n  }\n\n  async function handleSubmit(e) {\n    e.preventDefault();\n    const data = {\n      \"transaction\": {\n        \"from\": props.user.email,\n        \"to\": Array.from(selectedMembers).filter(([member, checked]) => checked).map(([member, checked]) => member),\n        \"amount\": Number(amount),\n        \"currency_code\": props.user.default_currency,\n        \"group_id\": props.group.id,\n        \"description\": description\n      }\n    };\n\n    try {\n      const response = await axios.post(SERVER_URL + '/transaction/create', data);\n      props.reloadGroupView();\n      props.closeModal();\n    } catch (error) {\n      const data = error.response.data;\n      const msg = Array.isArray(data) ? data.map(d => d.message) : [\"Some error occured, please try again.\"];\n      setErrorMsg(msg);\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Modal, {\n      show: props.isOpen,\n      onHide: props.closeModal,\n      keyboard: false,\n      backdrop: \"static\",\n      className: \"add-expense-modal\",\n      animation: false,\n      style: {\n        width: \"100vw\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        children: [/*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: \"Add an expense\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(AlertMessages, {\n          type: \"danger\",\n          messages: errorMsg\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: [/*#__PURE__*/_jsxDEV(Card.Title, {\n          children: \"With you and\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(ListGroup, {\n          children: payees.map(member => /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n            children: /*#__PURE__*/_jsxDEV(InputGroup, {\n              className: \"mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(InputGroup.Checkbox, {\n                defaultChecked: true,\n                onChange: toggleMember.bind(null, member.email),\n                \"aria-label\": \"Checkbox for following text input\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 343,\n                columnNumber: 37\n              }, this), \"\\xA0\", /*#__PURE__*/_jsxDEV(Form.Label, {\n                children: `${member.first_name}${member.last_name ? \" \" + member.last_name : \"\"}`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 344,\n                columnNumber: 39\n              }, this)]\n            }, member.email, true, {\n              fileName: _jsxFileName,\n              lineNumber: 342,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 341,\n            columnNumber: 29\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Container, {\n          children: /*#__PURE__*/_jsxDEV(Row, {\n            children: [/*#__PURE__*/_jsxDEV(Col, {\n              sm: 2,\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: \"https://s3.amazonaws.com/splitwise/uploads/category/icon/square_v2/uncategorized/general@2x.png\",\n                alt: \"transaction\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 352,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 351,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              sm: 3,\n              children: [/*#__PURE__*/_jsxDEV(Row, {\n                children: /*#__PURE__*/_jsxDEV(Form.Group, {\n                  controlId: \"formDescription\",\n                  children: /*#__PURE__*/_jsxDEV(Form.Control, {\n                    type: \"text\",\n                    style: {\n                      fontSize: '24px',\n                      width: '29.5rem'\n                    },\n                    placeholder: \"Description\",\n                    onChange: handleDescChange\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 357,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 356,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 355,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Row, {\n                children: /*#__PURE__*/_jsxDEV(CurrencyInput, {\n                  prefix: CURRENCYFORMAT[props.user.default_currency],\n                  value: amount,\n                  onChange: handleAmountChange,\n                  style: {\n                    fontSize: '32px',\n                    width: '29.5rem',\n                    border: '1px solid #ccc',\n                    'border-radius': '4px',\n                    color: '#5555555'\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 361,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 360,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 354,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 350,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: \"secondary\",\n          onClick: props.closeModal,\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 368,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          onClick: handleSubmit,\n          children: \"Save\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n}\n\n_s3(AddExpenseModal, \"pyPateKAKTtGUUnegx6asCM69dU=\");\n\n_c3 = AddExpenseModal;\n\nfunction SettleUpWarningModal(props) {\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Modal, {\n      show: props.isOpen,\n      onHide: props.closeModal,\n      keyboard: false,\n      className: \"add-expense-modal\",\n      animation: false,\n      style: {\n        width: \"100vw\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: /*#__PURE__*/_jsxDEV(\"h2\", {\n            style: {\n              color: 'red'\n            },\n            children: \"You can not leave this group.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 390,\n            columnNumber: 34\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 390,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 389,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: 'blue'\n          },\n          children: \"Please settle up all the amounts you owe or others owe to you before leaving the group\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 392,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"success\",\n          onClick: props.closeModal,\n          children: \"OK\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 396,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 395,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 381,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n}\n\n_c4 = SettleUpWarningModal;\n\nfunction mapState(state) {\n  const {\n    user\n  } = state.authentication;\n  return {\n    user\n  };\n}\n\nconst actionCreators = {\n  errorAlert: alertActions.error,\n  clearAlert: alertActions.clear\n};\nconst connectedGroupView = connect(mapState, actionCreators)(GroupView);\nconst ConnectedAddExpenseModal = connect(mapState, actionCreators)(AddExpenseModal);\nconst ConnectedGroupHeader = connect(mapState, actionCreators)(GroupHeader);\nexport { connectedGroupView as GroupView };\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"UserBalanceView\");\n$RefreshReg$(_c2, \"GroupHeader\");\n$RefreshReg$(_c3, \"AddExpenseModal\");\n$RefreshReg$(_c4, \"SettleUpWarningModal\");","map":{"version":3,"sources":["/Users/poonam/Projects/Splitwise/Frontend/src/components/Groups/GroupView.js"],"names":["axios","React","useState","Button","Card","Col","Container","Form","InputGroup","ListGroup","Modal","Row","CurrencyInput","GrEdit","connect","alertActions","SERVER_URL","calculateDebtForAGroup","CURRENCYFORMAT","getRoundedAmount","AlertMessages","GroupAvatar","LocalizedAmount","UserAvatar","PerFriendSettleUpModal","TransactionView","GroupCreateOrUpdateModal","GroupView","Component","constructor","props","state","groupId","group","transactions","isAddExpenseOpen","isGroupUpdateOpen","componentDidMount","fetchData","groupRes","txnRes","Promise","all","get","setState","data","err","errorAlert","forceReload","render","balances","canLeave","usersBalance","filter","balance","user","email","totalAmount","reloadHomeView","bind","length","map","UserBalanceView","isSettleUpModalOpen","openSettleUpModal","color","suffix","display","marginRight","marginLeft","marginTop","default_currency","reloadGroupView","GroupHeader","setAddExpenseFormOpen","setGroupUpdateOpen","settleUpWarning","openSettleUpWarning","openAddExpenseForm","closeAddExpenseForm","openUpdateGroupForm","closeUpdateGroupForm","openSettleUpWarningModal","closeSettleUpWarningModal","leaveGroup","id","userId","response","post","error","msg","Array","isArray","d","message","joinGroup","isJoined","_","find","members","m","group_join_status","alignItems","name","AddExpenseModal","payees","member","u","selectedMembers","setSelectedMembers","Map","amount","setAmount","description","setDescription","errorMsg","setErrorMsg","toggleMember","memberEmail","set","handleAmountChange","event","maskedvalue","floatvalue","handleDescChange","e","preventDefault","target","value","handleSubmit","from","checked","Number","closeModal","isOpen","width","first_name","last_name","fontSize","border","SettleUpWarningModal","mapState","authentication","actionCreators","clearAlert","clear","connectedGroupView","ConnectedAddExpenseModal","ConnectedGroupHeader"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport React, { useState } from 'react';\nimport { Button, Card, Col, Container, Form, InputGroup, ListGroup, Modal, Row } from 'react-bootstrap';\nimport CurrencyInput from 'react-currency-input';\nimport { GrEdit } from 'react-icons/gr';\nimport { connect } from 'react-redux';\nimport { alertActions } from '../../_actions';\nimport { SERVER_URL } from '../../_constants';\nimport { calculateDebtForAGroup } from '../../_helper/debtcalculator';\nimport { CURRENCYFORMAT, getRoundedAmount } from '../../_helper/money';\nimport { AlertMessages } from '../Alert/Alert';\nimport { GroupAvatar, LocalizedAmount, UserAvatar } from '../Shared/Shared';\nimport { PerFriendSettleUpModal } from '../Transactions/PerFriendSettleupModal';\nimport { TransactionView } from '../Transactions/TransactionView';\nimport { GroupCreateOrUpdateModal } from './GroupCreateOrUpdateModel';\n\n\nclass GroupView extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = { groupId: this.props.groupId, group: null, transactions: [], isAddExpenseOpen: false, isGroupUpdateOpen: false, };\n    }\n\n    async componentDidMount() {\n        await this.fetchData();\n    }\n\n    async fetchData() {\n        try {\n            if (this.props.groupId) {\n                const [groupRes, txnRes] = await Promise.all([\n                    axios.get(SERVER_URL + '/group/get?groupId=' + this.props.groupId),\n                    axios.get(SERVER_URL + '/group/transactions?groupId=' + this.props.groupId),\n                ]);\n                this.setState({\n                    group: groupRes.data,\n                    transactions: txnRes.data,\n                });\n\n            }\n        } catch (err) {\n            this.props.errorAlert([\"Something went wrong. Please try again\"]);\n        }\n    }\n\n    forceReload() {\n        this.fetchData();\n    }\n\n    render() {\n        let balances = null;\n        let canLeave = false;\n        if (this.state.group) {\n            balances = calculateDebtForAGroup(this.state.group, this.state.transactions);\n            const usersBalance = balances.filter((balance) => balance.user.email === this.props.user.email)[0];\n            balances = balances.filter((balance) => balance.user.email !== this.props.user.email);\n            if (usersBalance) {\n                canLeave = getRoundedAmount(usersBalance.totalAmount) === 0;\n            }\n        }\n        return (\n            <>\n                <Container fluid={true}>\n                    <Row fluid={true}>\n                        <Col sm={8} lg={8}>\n                            {this.state.group && (\n                                <Card>\n                                    <ConnectedGroupHeader\n                                        data={{ group: this.state.group }}\n                                        canLeave={canLeave}\n                                        reloadHomeView={this.props.reloadHomeView}\n                                        reloadGroupView={this.forceReload.bind(this)}\n                                    />\n                                    <TransactionView\n                                        transactions={this.state.transactions}\n                                        reloadGroupView={this.forceReload.bind(this)}\n                                    />\n                                </Card>\n                            )}\n                        </Col>\n                        <Col sm={2} lg={2}>\n                            {this.state.transactions.length > 0 &&\n                                balances &&\n                                balances.length > 0 &&\n                                balances.map((balance) => (\n                                    <UserBalanceView\n                                        data={balance}\n                                        group={this.state.group}\n                                        reloadGroupView={this.forceReload.bind(this)}\n                                    />\n                                ))}\n                        </Col>\n                    </Row>\n                </Container>\n            </>\n        );\n    }\n}\n\nconst UserBalanceView = (props) => {\n    const [isSettleUpModalOpen, openSettleUpModal] = useState(false);\n\n    const color = props.data.totalAmount === 0 ? 'orange' : (props.data.totalAmount > 0 ? 'green' : 'red');\n    const suffix = props.data.totalAmount === 0 ? \"settled up\" :\n        (props.data.totalAmount > 0 ? ' gets back ' : ' owes ');\n    return (\n        <ListGroup.Item key={props.data.user.email}>\n            <div style={{ display: 'flex' }}>\n                <div style={{ marginRight: '3rem' }}>\n                    <UserAvatar user={props.data.user} />\n                    <div\n                        style={{ marginLeft: '3rem', marginTop: '-1rem' }}\n                        className='h5'\n                    >\n                        <span style={{ color }}>\n                            {suffix}\n                            {props.data.totalAmount !== 0 && (\n                                <LocalizedAmount\n                                    amount={props.data.totalAmount}\n                                    currency={props.data.user.default_currency}\n                                />\n                            )}\n                        </span>\n                    </div>\n                </div>\n                <div>\n                    {props.data.totalAmount != 0 && (\n                        <Button variant='primary' onClick={() => openSettleUpModal(true)}>\n                            SETTLE UP\n                        </Button>\n                    )}\n                    <PerFriendSettleUpModal\n                        total={props.data.totalAmount}\n                        group={props.group}\n                        friend={props.data.user}\n                        isOpen={isSettleUpModalOpen}\n                        closeModal={() => openSettleUpModal(false)}\n                        reloadGroupView={props.reloadGroupView}\n                    />\n                </div>\n            </div>\n        </ListGroup.Item>\n    );\n}\n\nconst GroupHeader = (props) => {\n    const [isAddExpenseOpen, setAddExpenseFormOpen] = useState(false);\n    const [isGroupUpdateOpen, setGroupUpdateOpen] = useState(false);\n    const [settleUpWarning, openSettleUpWarning] = useState(false);\n\n    function openAddExpenseForm() {\n        setAddExpenseFormOpen(true);\n    }\n    function closeAddExpenseForm() {\n        setAddExpenseFormOpen(false);\n    }\n    function openUpdateGroupForm() {\n        setGroupUpdateOpen(true);\n    }\n    function closeUpdateGroupForm() {\n        setGroupUpdateOpen(false);\n    }\n    function openSettleUpWarningModal() {\n        openSettleUpWarning(true);\n    }\n    function closeSettleUpWarningModal() {\n        openSettleUpWarning(false);\n    }\n\n    async function leaveGroup() {\n        const data = {\n            groupId: props.data.group.id,\n            userId: props.user.email,\n        };\n        try {\n            const response = await axios.post(SERVER_URL + '/group/leave', data);\n\n            props.reloadHomeView();\n            props.reloadGroupView();\n        } catch (error) {\n            const data = error.response.data;\n            const msg = Array.isArray(data) ? data.map(d => d.message) : [\"Some error occured, please try again.\"];\n            props.errorAlert(msg);\n        }\n    }\n\n    async function joinGroup() {\n        const data = {\n            groupId: props.data.group.id,\n            userId: props.user.email,\n        };\n        try {\n            const response = await axios.post(SERVER_URL + '/group/join', data);\n\n            props.reloadHomeView();\n            props.reloadGroupView();\n        } catch (error) {\n            const data = error.response.data;\n            const msg = Array.isArray(data) ? data.map(d => d.message) : [\"Some error occured, please try again.\"];\n            props.errorAlert(msg);\n        }\n    }\n\n    const isJoined = _.find(props.data.group.members, (m) => m.email == props.user.email).group_join_status !== \"INVITED\";\n\n    return (\n        <Card.Header>\n            <Container>\n                <Row>\n                    <Col sm={6}>\n                        <div style={{ display: 'flex', alignItems: 'baseline' }}>\n                            <h3 style={{ marginRight: '1rem' }}>\n                                <GroupAvatar group={props.data.group} /> &nbsp;{' '}\n                                {props.data.group.name}\n                            </h3>\n                            {isJoined && <GrEdit onClick={openUpdateGroupForm} />}\n                            {isGroupUpdateOpen ? (\n                                <GroupCreateOrUpdateModal\n                                    group={props.data.group}\n                                    reloadHomeView={() => {\n                                        props.reloadHomeView();\n                                        props.reloadGroupView();\n                                    }}\n                                    createMode={false}\n                                    closeModal={closeUpdateGroupForm}\n                                    isOpen={isGroupUpdateOpen}\n                                />\n                            ) : null}\n                        </div>\n                    </Col>\n                    <Col sm={3}>\n                        {' '}\n                        <div style={{ display: 'flex', alignItems: 'baseline' }}>\n                            {isJoined && props.data.group.members.filter((m) => m.group_join_status !== \"INVITED\").length > 1 && (\n                                <Button onClick={openAddExpenseForm}>ADD EXPENSE</Button>\n                            )}\n                            {!isJoined && (\n                                <Button variant='success' onClick={joinGroup}>\n                                    ACCEPT INVITATION\n                                </Button>\n                            )}\n                            {isAddExpenseOpen ? (\n                                <ConnectedAddExpenseModal\n                                    reloadGroupView={props.reloadGroupView}\n                                    group={props.data.group}\n                                    closeModal={closeAddExpenseForm}\n                                    isOpen={isAddExpenseOpen}\n                                />\n                            ) : null}\n                            <Button\n                                style={{ marginLeft: '2rem' }}\n                                variant='danger'\n                                onClick={\n                                    props.canLeave ? leaveGroup : openSettleUpWarningModal\n                                }\n                            >\n                                LEAVE GROUP\n                </Button>\n                            <SettleUpWarningModal\n                                isOpen={settleUpWarning}\n                                closeModal={closeSettleUpWarningModal}\n                            />\n                        </div>\n                    </Col>\n                </Row>\n            </Container>\n        </Card.Header>\n    );\n};\n\nfunction AddExpenseModal(props) {\n    const payees = props.group.members.filter((member) => member.email !== props.user.email).filter((u) => u?.group_join_status !== \"INVITED\");\n    const [selectedMembers, setSelectedMembers] = useState(new Map(\n        payees.map((member) => [member.email, true]))\n    );\n\n    const [amount, setAmount] = useState(0);\n    const [description, setDescription] = useState(\"\");\n\n    const [errorMsg, setErrorMsg] = useState([]);\n\n    function toggleMember(memberEmail) {\n        selectedMembers.set(memberEmail, !selectedMembers.get(memberEmail));\n        setSelectedMembers(selectedMembers);\n    }\n\n    function handleAmountChange(event, maskedvalue, floatvalue) {\n        setAmount(maskedvalue);\n    }\n\n    function handleDescChange(e) {\n        e.preventDefault();\n        setDescription(e.target.value);\n    }\n\n    async function handleSubmit(e) {\n        e.preventDefault();\n        const data = {\n            \"transaction\": {\n                \"from\": props.user.email,\n                \"to\": Array.from(selectedMembers).filter(([member, checked]) => checked).map(([member, checked]) => member),\n                \"amount\": Number(amount),\n                \"currency_code\": props.user.default_currency,\n                \"group_id\": props.group.id,\n                \"description\": description,\n            },\n        };\n\n        try {\n            const response = await axios.post(SERVER_URL + '/transaction/create', data);\n            props.reloadGroupView();\n            props.closeModal();\n\n        } catch (error) {\n            const data = error.response.data;\n            const msg = Array.isArray(data) ? data.map(d => d.message) : [\"Some error occured, please try again.\"];\n            setErrorMsg(msg);\n        }\n    }\n\n    return (\n        <>\n            <Modal\n                show={props.isOpen}\n                onHide={props.closeModal}\n                keyboard={false}\n                backdrop=\"static\"\n                className=\"add-expense-modal\"\n                animation={false}\n                style={{ width: \"100vw\" }}\n            >\n                <Modal.Header closeButton>\n                    <Modal.Title>Add an expense</Modal.Title>\n                    <AlertMessages type=\"danger\" messages={errorMsg} />\n                </Modal.Header>\n                <Modal.Body>\n                    <Card.Title>With you and</Card.Title>\n                    <ListGroup>\n                        {payees.map((member) => (\n                            <ListGroup.Item>\n                                <InputGroup className=\"mb-3\" key={member.email}>\n                                    <InputGroup.Checkbox defaultChecked={true} onChange={toggleMember.bind(null, member.email)} aria-label=\"Checkbox for following text input\" />\n                                &nbsp;<Form.Label>{`${member.first_name}${member.last_name ? \" \" + member.last_name : \"\"}`}</Form.Label>\n                                </InputGroup>\n                            </ListGroup.Item>\n                        ))}\n                    </ListGroup>\n                    <Container>\n                        <Row>\n                            <Col sm={2}>\n                                <img src=\"https://s3.amazonaws.com/splitwise/uploads/category/icon/square_v2/uncategorized/general@2x.png\" alt=\"transaction\" />\n                            </Col>\n                            <Col sm={3}>\n                                <Row>\n                                    <Form.Group controlId=\"formDescription\">\n                                        <Form.Control type=\"text\" style={{ fontSize: '24px', width: '29.5rem' }} placeholder=\"Description\" onChange={handleDescChange} />\n                                    </Form.Group>\n                                </Row>\n                                <Row>\n                                    <CurrencyInput prefix={CURRENCYFORMAT[props.user.default_currency]} value={amount} onChange={handleAmountChange} style={{ fontSize: '32px', width: '29.5rem', border: '1px solid #ccc', 'border-radius': '4px', color: '#5555555' }} />\n                                </Row>\n                            </Col>\n                        </Row>\n                    </Container>\n                </Modal.Body>\n                <Modal.Footer>\n                    <Button variant=\"secondary\" onClick={props.closeModal}>\n                        Cancel\n            </Button>\n                    <Button variant=\"primary\" onClick={handleSubmit}>Save</Button>\n                </Modal.Footer>\n            </Modal>\n        </>\n    );\n}\n\nfunction SettleUpWarningModal(props) {\n    return (\n        <>\n            <Modal\n                show={props.isOpen}\n                onHide={props.closeModal}\n                keyboard={false}\n                className=\"add-expense-modal\"\n                animation={false}\n                style={{ width: \"100vw\" }}\n            >\n                <Modal.Header closeButton>\n                    <Modal.Title><h2 style={{ color: 'red' }}>You can not leave this group.</h2></Modal.Title>\n                </Modal.Header>\n                <Modal.Body>\n                    <p style={{ color: 'blue' }}>Please settle up all the amounts you owe or others owe to you before leaving the group</p>\n                </Modal.Body>\n                <Modal.Footer>\n                    <Button variant=\"success\" onClick={props.closeModal}>\n                        OK\n                    </Button>\n                </Modal.Footer>\n            </Modal>\n        </>\n    );\n}\n\nfunction mapState(state) {\n    const { user } = state.authentication;\n    return { user };\n}\n\nconst actionCreators = {\n    errorAlert: alertActions.error,\n    clearAlert: alertActions.clear,\n};\n\n\nconst connectedGroupView = connect(mapState, actionCreators)(GroupView);\nconst ConnectedAddExpenseModal = connect(mapState, actionCreators)(AddExpenseModal)\nconst ConnectedGroupHeader = connect(mapState, actionCreators)(GroupHeader)\nexport { connectedGroupView as GroupView };\n"]},"metadata":{},"sourceType":"module"}