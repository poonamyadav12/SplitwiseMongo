{"ast":null,"code":"var _jsxFileName = \"/Users/poonam/Projects/Splitwise/Frontend/src/components/Friends/FriendView.js\";\nimport axios from 'axios';\nimport React from 'react';\nimport { Card, Col, Container, Row } from 'react-bootstrap';\nimport { connect } from 'react-redux';\nimport { alertActions } from '../../_actions';\nimport { SERVER_URL } from '../../_constants';\nimport { calculateDebt } from '../../_helper/debtcalculator';\nimport { getRoundedAmount } from '../../_helper/money';\nimport { LocalizedAmount, UserAvatar } from '../Shared/Shared';\nimport { TransactionView } from '../Transactions/TransactionView';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass FriendView extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      transactions: null\n    };\n  }\n\n  async componentDidMount() {\n    await this.fetchData();\n  }\n\n  async fetchData() {\n    try {\n      if (this.props.friend) {\n        const friendTxn = await axios.get(`${SERVER_URL}/transaction/friend?friendId=${this.props.friend.email}&userId=${this.props.user.email}`);\n        this.setState({\n          transactions: friendTxn.data\n        });\n      }\n    } catch (err) {\n      this.props.errorAlert([\"Something went wrong. Please try again\"]);\n    }\n  }\n\n  async forceReload() {\n    await this.fetchData();\n  }\n\n  render() {\n    var _this$props;\n\n    let balance = null;\n    let color = null;\n    let suffix = null;\n    let totalAmount = 0;\n\n    if (this.props.friend) {\n      balance = calculateDebt(this.props.user, this.state.transactions, true);\n      totalAmount = getRoundedAmount(balance.totalAmount);\n      color = totalAmount === 0 ? 'orange' : totalAmount > 0 ? 'green' : 'red';\n      suffix = totalAmount === 0 ? \"settled up\" : totalAmount < 0 ? ' gets back ' : ' owes you ';\n    }\n\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        lg: 8,\n        children: this.props.friend && /*#__PURE__*/_jsxDEV(Card, {\n          children: [/*#__PURE__*/_jsxDEV(FriendHeader, {\n            data: {\n              friend: this.props.friend\n            },\n            reload: this.forceReload.bind(this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 21\n          }, this), this.state.transactions && /*#__PURE__*/_jsxDEV(TransactionView, {\n            transactions: this.state.transactions\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 49\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 39\n        }, this)\n      }, (_this$props = this.props) === null || _this$props === void 0 ? void 0 : _this$props.friend, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        lg: 2,\n        children: this.props.friend && this.state.transactions && this.state.transactions.length > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(UserAvatar, {\n            user: this.props.friend\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 23\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginLeft: '3rem',\n              marginTop: '-1rem'\n            },\n            className: \"h4\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                color\n              },\n              children: [suffix, totalAmount !== 0 && /*#__PURE__*/_jsxDEV(LocalizedAmount, {\n                amount: balance.totalAmount,\n                currency: this.props.user.default_currency\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 66,\n                columnNumber: 47\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 133\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 62\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true);\n  }\n\n}\n\nconst FriendHeader = props => {\n  return /*#__PURE__*/_jsxDEV(Card.Header, {\n    children: /*#__PURE__*/_jsxDEV(Container, {\n      fluid: true,\n      children: /*#__PURE__*/_jsxDEV(Row, {\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          sm: 12,\n          className: \"h4\",\n          children: /*#__PURE__*/_jsxDEV(UserAvatar, {\n            user: props.data.friend\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 49\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 9\n  }, this);\n};\n\n_c = FriendHeader;\n\nfunction mapState(state) {\n  const {\n    user\n  } = state.authentication;\n  return {\n    user\n  };\n}\n\nconst actionCreators = {\n  errorAlert: alertActions.error,\n  clearAlert: alertActions.clear\n};\nconst connectedFriendView = connect(mapState, actionCreators)(FriendView);\nexport { connectedFriendView as FriendView };\n\nvar _c;\n\n$RefreshReg$(_c, \"FriendHeader\");","map":{"version":3,"sources":["/Users/poonam/Projects/Splitwise/Frontend/src/components/Friends/FriendView.js"],"names":["axios","React","Card","Col","Container","Row","connect","alertActions","SERVER_URL","calculateDebt","getRoundedAmount","LocalizedAmount","UserAvatar","TransactionView","FriendView","Component","constructor","props","state","transactions","componentDidMount","fetchData","friend","friendTxn","get","email","user","setState","data","err","errorAlert","forceReload","render","balance","color","suffix","totalAmount","bind","length","marginLeft","marginTop","default_currency","FriendHeader","mapState","authentication","actionCreators","error","clearAlert","clear","connectedFriendView"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport React from 'react';\nimport { Card, Col, Container, Row } from 'react-bootstrap';\nimport { connect } from 'react-redux';\nimport { alertActions } from '../../_actions';\nimport { SERVER_URL } from '../../_constants';\nimport { calculateDebt } from '../../_helper/debtcalculator';\nimport { getRoundedAmount } from '../../_helper/money';\nimport { LocalizedAmount, UserAvatar } from '../Shared/Shared';\nimport { TransactionView } from '../Transactions/TransactionView';\n\n\nclass FriendView extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = { transactions: null, };\n\n    }\n\n    async componentDidMount() {\n        await this.fetchData();\n    }\n\n    async fetchData() {\n        try {\n            if (this.props.friend) {\n\n                const friendTxn = await axios.get(`${SERVER_URL}/transaction/friend?friendId=${this.props.friend.email}&userId=${this.props.user.email}`);\n\n                this.setState({\n                    transactions: friendTxn.data,\n                });\n            }\n        } catch (err) {\n            this.props.errorAlert([\"Something went wrong. Please try again\"]);\n        }\n    }\n\n    async forceReload() {\n        await this.fetchData();\n    }\n\n    render() {\n        let balance = null;\n        let color = null;\n        let suffix = null;\n        let totalAmount = 0;\n        if (this.props.friend) {\n            balance = calculateDebt(this.props.user, this.state.transactions, true);\n            totalAmount = getRoundedAmount(balance.totalAmount);\n            color = totalAmount === 0 ? 'orange' : (totalAmount > 0 ? 'green' : 'red');\n            suffix = totalAmount === 0 ? \"settled up\" :\n                (totalAmount < 0 ? ' gets back ' : ' owes you ');\n        }\n        return <>\n            <Col lg={8} key={this.props?.friend}>\n                {this.props.friend && <Card>\n                    <FriendHeader data={{ friend: this.props.friend }} reload={this.forceReload.bind(this)} />\n                    {this.state.transactions && <TransactionView transactions={this.state.transactions} />}\n                </Card>}\n            </Col>\n            <Col lg={2}>\n                {this.props.friend && this.state.transactions && this.state.transactions.length > 0 &&\n                    <><UserAvatar user={this.props.friend} /><div style={{ marginLeft: '3rem', marginTop: '-1rem' }} className=\"h4\"><span style={{ color }}>{suffix}\n                        {totalAmount !== 0 && <LocalizedAmount amount={balance.totalAmount} currency={this.props.user.default_currency} />}</span></div></>}\n            </Col>\n        </>;\n    }\n}\n\nconst FriendHeader = (props) => {\n    return (\n        <Card.Header>\n            <Container fluid={true}>\n                <Row>\n                    <Col sm={12} className=\"h4\"><UserAvatar user={props.data.friend} /></Col>\n                </Row>\n            </Container>\n        </Card.Header >\n    )\n};\n\n\nfunction mapState(state) {\n    const { user } = state.authentication;\n    return { user };\n}\n\nconst actionCreators = {\n    errorAlert: alertActions.error,\n    clearAlert: alertActions.clear,\n};\n\n\nconst connectedFriendView = connect(mapState, actionCreators)(FriendView);\nexport { connectedFriendView as FriendView };\n"]},"metadata":{},"sourceType":"module"}